import{_ as w,e as p,N as f,c as h,a as u,b as o,F as d,r as _,s as m,g as k,o as n,t as r,C,u as x,f as v}from"./index-e477a540.js";const N={data(){return{conpages:"",cur:1,pageSize:20,showPage:[]}},computed:{getShowPage:function(){let s=[];if(this.conpages>10){for(let e=0;e<10;e++)s[e]=e+1;return s}else{for(let e=0;e<this.conpages;e++)s[e]=e+1;return s}}},created(){p.get("/api/events", { params: { page: this.cur } }).then(s=>{this.porps=s.data.data,this.conpages=Math.ceil(s.data.total/this.pageSize)||1,this.page(this.cur)})},methods:{page(s){if(this.cur=s,this.cur==this.getShowPage[this.getShowPage.length-1]&&this.conpages>this.cur)for(let t=0;t<this.getShowPage.length;t++)this.conpages-this.getShowPage[this.getShowPage.length-1]<2?this.getShowPage[t]=this.getShowPage[t]+1:this.getShowPage[t]=this.getShowPage[t]+2;if(this.cur==this.getShowPage[0]&&this.cur>1)for(let t=0;t<this.getShowPage.length;t++)this.cur==2?this.getShowPage[t]=this.getShowPage[t]-1:this.getShowPage[t]=this.getShowPage[t]-2;var e=(this.cur-1)*this.pageSize;this.showPage=this.porps.slice(e,e+this.pageSize)},prav(){this.cur!=1&&(this.cur--,this.page(this.cur))},next(){this.cur<this.conpages&&(this.cur++,this.page(this.cur))}},setup(){const s=k(),e=s.state.searchData,t=x();return{lists:e,getDetail:g=>{console.log(g),p.get("/api/event-data",{params:{event_topic:g}}).then(function(a){s.commit("getEvent",a.data),t.push({path:"/detail"})})}}},components:{Nar:f}},y={style:{minHeight:"100vh"}},z={class:"maine"},D=["onClick"],E={class:"title"},B={class:"content"},V={class:"page"},F=["onClick"],L={key:0,class:"pages"};function b(s,e,t,c,g,a){const S=v("Nar"),P=v("a-divider");return n(),h("div",y,[u(S),o("div",z,[(n(!0),h(d,null,_(g.showPage,i=>(n(),h("div",null,[o("div",{onClick:l=>c.getDetail(i.title)},[o("div",E,r(i.title),1),o("div",B,r(i.des),1)],8,D),u(P)]))),256)),o("div",V,[o("div",{class:"pravPage",onClick:e[0]||(e[0]=(...i)=>a.prav&&a.prav(...i))},"上一页"),(n(!0),h(d,null,_(a.getShowPage,(i,l)=>(n(),h("div",{class:C(["pages",i==g.cur?"active":""]),key:l,onClick:H=>a.page(i)},r(i),11,F))),128)),this.conpages!=this.getShowPage[this.getShowPage.length-1]?(n(),h("div",L,"...")):m("",!0),o("div",{class:"nextPage",onClick:e[1]||(e[1]=(...i)=>a.next&&a.next(...i))},"下一页")])])])}const R=w(N,[["render",b]]);export{R as default};
